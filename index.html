<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bee Organized</title>
   <!-- Styles principaux -->
   <link rel="stylesheet" href="styles/base.css">
   <link rel="stylesheet" href="styles/disposition.css">
 
   <!-- Composants -->
   <link rel="stylesheet" href="styles/composantes/boutons.css">
   <link rel="stylesheet" href="styles/composantes/modales.css">
   <link rel="stylesheet" href="styles/composantes/cartes.css">
   <link rel="stylesheet" href="styles/composantes/categories.css">
   <link rel="stylesheet" href="styles/composantes/filtres.css">
   <link rel="stylesheet" href="styles/composantes/hamburger.css">
   <link rel="stylesheet" href="styles/composantes/corbeille.css">
 
   <!-- Th√®me -->
   <link rel="stylesheet" href="styles/themes/palette.css">
 
   <!-- Utilitaires & responsive -->
   <link rel="stylesheet" href="styles/utilitaires.css">
   <link rel="stylesheet" href="styles/responsive.css">
 
  <link rel="stylesheet" href="styles.css">
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Merriweather:wght@400;700&display=swap"
    rel="stylesheet">
  <script type="module" src="main.js"></script>
  <script type="module" src="tests.js"></script>
</head>

<body>
  <h1>MindStance</h1>
  <h2>Organize your things</h2>
  <!-- Boutons principaux -->
  <div class="mode-toggle">
    <button id="btnModeCategories" class="toggle-btn">Par cat√©gories</button>
    <button id="btnModeCartes" class="toggle-btn">Par cartes</button>
  </div>

  <!-- üü¢ Bouton global d‚Äôajout de carte -->
  <button id="toggleFormBtn">
    <span class="icone">‚ûï</span>
    <span class="texte hidden">Ajouter une carte</span>
  </button>

  <!-- √âtiquettes & r√©initialisation -->
  <div id="etiquettes-container"></div>
  <button id="resetFilterBtn" class="hidden">R√©initialiser le filtre</button>

  <!-- Zone de retour et titre de cat√©gorie -->
  <div id="zoneRetourSimple">
    <button id="btnRetourCategories" class="hidden">Retour aux cat√©gories</button>
  </div>
  <h2 id="titreCategorieSelectionnee" class="hidden"></h2>
  <button id="btnAjouterSousCategorie" class="btn-action hidden">+ Ajouter une sous-cat√©gorie</button>

  <!-- Conteneur des vues -->
  <div class="categorie-cartes">
    <div id="vue-par-categories" class="hidden vueCategorie"></div>
    <div id="contenuCategorieSelectionnee">
      <p id="toggletxt">Cliquez sur une cat√©gorie pour en afficher les cartes</p></div>
    <div id="cartes-container" class="hidden"></div>
  </div>
  <!-- üîç Zone de tri et filtres -->
  <div id="zoneFiltres">
    <label for="triSelect">Trier par :</label>
    <select id="triSelect" class="triSelect">
      <option value="date-desc">Du plus r√©cent au plus ancien</option>
      <option value="date-asc">Du plus ancien au plus r√©cent</option>
      <option value="titre-asc">Titre (A ‚Üí Z)</option>
      <option value="titre-desc">Titre (Z ‚Üí A)</option>
    </select>

    <select id="tagFilter" class="tagFilter">
      <option value="">S√©lectionner un tag</option>
    </select>

    <input type="text" id="search" placeholder="Rechercher par tag...">
  </div>

  <!-- üìÇ Modale de cr√©ation de carte -->
  <div id="modalAjoutCarte" class="modal hidden">
    <input type="hidden" id="categorieChoisie">
    <div class="modal-content">
      <span class="close" id="closeAjoutCarteModal">√ó</span>
      <h3 id="titreModaleCarte">Cr√©er une nouvelle carte</h3>

      <form id="formAjoutCarte">
        <div class="modal-container colonne">
          <!-- Champ Titre -->
          <input type="text" id="titre" placeholder="Titre">

          <div id="erreurTitre" class="message-erreur"></div>
          <!-- Champ Tags -->
          <input type="text" id="tags" placeholder="Tags (s√©par√©s par des virgules)">

          <!-- Bouton de s√©lection de cat√©gorie -->
          <button id="btnCategorieOptions" class="btn-categorie" type="button">Choisir une cat√©gorie</button>

          <div id="categorieSelectionnee" class="categorie-resume hidden">
            <span id="texteCategorieCarte">-- Choisir une cat√©gorie --</span>
          </div>

          <!-- Menu d√©roulant des cat√©gories -->
          <div id="listeCategories" class="liste-categories liste-categories-modale hidden"></div>
          <div id="erreurCategorie" class="message-erreur"></div>
          <!-- Champ Contenu -->
          <textarea id="contenu" placeholder="Contenu"></textarea>
          <div id="erreurContenu" class="message-erreur"></div>
          <!-- Bouton Ajouter -->
          <input type="hidden" id="carteId" value="">
          <button id="ajoutCarteBtn" class="btn-ajouter" type="button">Ajouter</button>
          <div class="btn-supprimer-wrapper">
            <button id="ouvrirConfirmationSuppressionCarteBtn" type="button" class="btn-supprimer hidden"
              title="Supprimer cette carte">
              üóë Supprimer
            </button>
          </div>
          <!-- Bouton Annuler (modification de carte existante uniquement) -->
          <button id="annulerModifBtn" class="hidden" type="button">Annuler</button>
          <input type="submit" class="hidden">
        </div>
        <!-- Bouton supprimer (visible uniquement en modification) -->
        <button id="btnConfirmerSuppressionCarte" class="btn-danger hidden">Supprimer cette carte</button>

      </form>
    </div>
  </div>
  <!-- üìå Nouvelle modale : Choix du type de cat√©gorie -->
  <div id="modalChoixTypeCategorie" class="modal hidden">
    <div class="modal-content">
      <span class="close" id="fermerChoixTypeCategorie">√ó</span>
      <h3>Cat√©gorie</h3>
      <p>Que voulez-vous faire ?</p>
      <button id="choisirCategorieExistante">Choisir une cat√©gorie existante</button>
      <button id="creerNouvelleCategorieCarte">Cr√©er une nouvelle cat√©gorie</button>
      <button id="choisirCategorieParent">Choisir une cat√©gorie parent</button>
      <div id="zoneChoixParentCategorie" class="hidden">
        <label for="selectParentTemporaire">Choisir un parent :</label>
        <select id="selectParentTemporaire">
          <option value="">Aucune</option>
          <!-- Ajouter dynamiquement des options ici -->
        </select>
      </div>
    </div>
  </div>
  <!-- üìÅ Modale pour gestion compl√®te des cat√©gories -->
  <div id="modalGestionCategories" class="modal hidden">
    <div class="modal-content">
      <span class="close" id="closeGestionModal">&times;</span>
      <h3>G√©rer les cat√©gories</h3>
      <div id="listeGestionCategories"></div>
    </div>
  </div>

  <!-- üìÇ Modale de cr√©ation de cat√©gorie -->
  <div id="modalCategorie" class="modal hidden">
    <div class="modal-content">
      <span class="close" id="closeModal">&times;</span>
      <h3>Cr√©er une nouvelle cat√©gorie</h3>
      <label for="nouvelleCategorieNom">Nom :</label>
      <input type="text" id="nouvelleCategorieNom">
      <label for="parentCategorie">Cat√©gorie parent :</label>
      <select id="parentCategorie">
        <option value="">Aucune</option>
      </select>
      <!-- R√©sum√© visuel du parent choisi -->
      <div id="resumeParentCategorie" class="hidden" class="resume-parent">
        <span id="nomParentResume"></span>
        <button id="retirerParentBtn" title="Retirer la cat√©gorie parent s√©lectionn√©e">√ó</button>
      </div>
      <label for="nouvelleCouleur">Couleur :</label>
      <select id="nouvelleCouleur"></select>
      <div id="resumeNouvelleCouleur" class="hidden resume-couleur" style="margin-top: 10px;">
        <span id="texteResumeCouleur">‚Äì</span>
      </div>
      <div id="resumeNouvelleCouleurDepuisCarte" class="hidden resume-couleur" style="margin-top: 10px;">
        <span id="texteResumeCouleurDepuisCarte">‚Äì</span>
      </div>
      <button id="btnCreerCategorie">Ajouter la cat√©gorie</button>
    </div>
  </div>

  <!-- üé® Modale pour changer la palette -->
  <div id="modalPalette" class="modal hidden">
    <div class="modal-content">
      <span class="close" id="fermerPaletteBtn">√ó</span>
      <h3>Choisir une palette de couleurs</h3>
      <div id="listePalettes"></div>
    </div>
  </div>

  <!-- üß∫ Corbeille en plein √©cran -->
  <div id="corbeille-page" class="corbeille-fullscreen hidden">
    <button class="close-btn" id="btnFermerCorbeille">‚úñ</button>
    <h2>√âl√©ments supprim√©s</h2>
    <button id="btnViderCorbeille">Vider la corbeille</button>
    <div id="cartes-corbeille"></div>
  </div>

  <!-- üçî Menu hamburger -->
  <div id="menuHamburger" class="hamburger-container">
    <button id="btnHamburger">‚ò∞</button>
    <div id="menuContent" class="menu-content hidden">
      <div class="menu-section">
        <h4>Cat√©gories</h4>
        <button id="btnNouvelleCategorieMenu">‚ûï Cr√©er une nouvelle cat√©gorie</button>
        <button id="btnGererCategoriesMenu">üõ† G√©rer les cat√©gories</button>
      </div>
      <div class="menu-section">
        <h4>Outils</h4>
        <button id="btnExporter">Exporter les cartes</button>
        <button id="btnImporter">Importer des cartes</button>
        <button id="btnAfficherCorbeille">Voir la corbeille</button>
      </div>
      <div class="menu-section">
        <h4>Personnalisation</h4>
        <button id="btnChangerPalette">Changer la palette</button>
      </div>
      <div class="menu-section">
        <h4>√Ä propos</h4>
        <button id="btnAPropos">Tout savoir sur Bee Organized</button>
      </div>
    </div>
  </div>

  <!-- üìÅ Fichier d'import JSON -->
  <input type="file" id="importFile" class="hidden" accept=".json">
  <!-- ‚úèÔ∏è Modale de modification de cat√©gorie -->
  <div id="modalEditCategorie" class="modal hidden">
    <div class="modal-content">
      <span class="close" id="closeEditModal">&times;</span>
      <h3 id="titreModaleModification">Modifier la cat√©gorie</h3>

      <label for="editCategorieNom">Nouveau nom :</label>
      <input type="text" id="editCategorieNom">

      <button id="btnEnregistrerModification">Enregistrer</button>
    </div>
  </div>
  <!-- üé® Modale de changement de couleur -->
  <div id="modalChangerCouleur" class="modal hidden">
    <div class="modal-content">
      <span class="close" id="closeCouleurModal">&times;</span>
      <h3>Changer la couleur</h3>
      <select id="selectNouvelleCouleur"></select>
      <button id="btnValiderCouleur">Valider</button>
    </div>
  </div>
  <!-- Modale de modification d'une carte -->
  <div id="modalChoisirParent" class="modal hidden">
    <div class="modal-content">
      <h3>Choisir une cat√©gorie parent</h3>
      <select id="selectCategorieParent">
        <!-- Rempli dynamiquement -->
      </select>
      <button id="confirmerParent">Utiliser cette cat√©gorie</button>
    </div>
  </div>
  <!-- üî¥ Modale de confirmation de suppression -->
  <div id="confirmSuppressionModal" class="modal hidden">
    <div class="modal-content">
      <h2>Confirmer la suppression</h2>
      <p>Voulez-vous vraiment supprimer cette carte&nbsp;? Cette action d√©placera la carte dans la corbeille.</p>

      <div class="actions">
        <button id="annulerSuppressionBtn" class="btn-secondary">Annuler</button>
        <button id="confirmerSuppressionCarteBtn" type="button" class="btn-danger">Supprimer</button>
      </div>
    </div>
  </div>
  <div id="modalConfirmationSuppression" class="modal hidden">
    <div class="modal-content">
      <h3>Supprimer cette carte ?</h3>
      <p>Cette action est irr√©versible. Voulez-vous vraiment supprimer cette carte ?</p>
      <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px;">
        <button id="annulerSuppressionCarteBtn" class="btn-secondary">Annuler</button>
        <button id="confirmerSuppressionBtn" type="button" class="btn-danger">Supprimer</button>
      </div>
    </div>
  </div>

</body>

</html>